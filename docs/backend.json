
{
  "entities": {
    "LoanApplication": {
      "title": "Loan Application",
      "type": "object",
      "description": "Represents a loan application submitted by a user.",
      "properties": {
        "userId": { "type": "string", "description": "The ID of the user who submitted the application." },
        "userEmail": { "type": "string", "description": "The email of the user who submitted the application.", "format": "email" },
        "fullName": { "type": "string", "description": "The full name of the applicant." },
        "email": { "type": "string", "description": "The email address of the applicant.", "format": "email" },
        "phone": { "type": "string", "description": "The phone number of the applicant." },
        "dateOfBirth": { "type": "string", "description": "The applicant's date of birth.", "format": "date" },
        "residentialAddress": { "type": "string", "description": "The applicant's residential address." },
        "city": { "type": "string" },
        "country": { "type": "string" },
        "loanAmount": { "type": "number", "description": "The amount requested for the loan." },
        "loanPurpose": { "type": "string", "enum": ["business", "education", "medical", "home", "personal", "other"]},
        "repaymentDuration": { "type": "number", "description": "The duration of the loan in months." },
        "documents": {
          "type": "object",
          "properties": {
            "governmentId": {"type": "string", "format": "uri"},
            "proofOfAddress": {"type": "string", "format": "uri"},
            "selfie": {"type": "string", "format": "uri"}
          }
        },
        "declarations": {
          "type": "object",
          "properties": {
            "accurateInfo": {"type": "boolean"},
            "termsAndConditions": {"type": "boolean"},
            "identityVerification": {"type": "boolean"},
            "acceptedAt": {"type": "string", "format": "date-time"}
          }
        },
        "status": { "type": "string", "description": "The current status of the application.", "enum": ["Processing", "Approved", "Rejected"], "default": "Processing"},
        "createdAt": { "type": "string", "description": "Date and time the application was submitted.", "format": "date-time" },
        "updatedAt": { "type": "string", "description": "Date and time the application was last updated.", "format": "date-time" },
        "adminNotes": { "type": "string", "description": "Internal notes for admin use." }
      },
      "required": [
        "userId", "userEmail", "fullName", "email", "phone", "dateOfBirth", "residentialAddress", "city", "country", "loanAmount", "loanPurpose", "repaymentDuration", "documents", "declarations", "status", "createdAt"
      ]
    },
    "Customer": {
      "title": "Customer",
      "description": "Represents a customer or borrower in the system.",
      "type": "object",
      "properties": {
        "name": { "type": "string", "description": "The full name of the customer." },
        "email": { "type": "string", "description": "The email address of the customer.", "format": "email" },
        "phone": { "type": "string", "description": "The phone number of the customer." },
        "bvn": { "type": "string", "description": "The Bank Verification Number of the customer." },
        "createdAt": { "type": "string", "description": "The date the customer was created.", "format": "date-time" }
      },
      "required": ["name", "email", "createdAt"]
    },
    "Loan": {
        "title": "Loan",
        "description": "Represents a loan record for a customer.",
        "type": "object",
        "properties": {
            "borrowerId": { "type": "string", "description": "The ID of the customer who borrowed the loan." },
            "loanAmount": { "type": "number", "description": "The principal amount of the loan." },
            "interestRate": { "type": "number", "description": "The flat interest rate for the loan." },
            "duration": { "type": "number", "description": "The duration of the loan in months." },
            "totalInterest": { "type": "number", "description": "Total interest amount." },
            "totalRepayment": { "type": "number", "description": "Total amount to be repaid (principal + interest)." },
            "monthlyRepayment": { "type": "number", "description": "The fixed monthly repayment amount." },
            "amountPaid": { "type": "number", "description": "The total amount paid so far." },
            "outstandingBalance": { "type": "number", "description": "The remaining balance to be paid." },
            "status": { "type": "string", "enum": ["Processing", "Approved", "Disbursed", "Active", "Completed", "Overdue", "Rejected"] },
            "createdAt": { "type": "string", "format": "date-time" },
            "updatedAt": { "type": "string", "format": "date-time" },
            "disbursedAt": { "type": "string", "format": "date-time", "description": "Timestamp when the loan was marked as disbursed." },
            "applicationId": { "type": "string", "description": "The ID of the original loan application."}
        },
        "required": ["borrowerId", "loanAmount", "status", "createdAt"]
    },
    "InvestmentApplication": {
      "title": "Investment Application",
      "description": "Represents an investment application submitted by a user.",
      "type": "object",
      "properties": {
        "userId": { "type": "string", "description": "The ID of the user submitting the application." },
        "fullName": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "phoneNumber": { "type": "string" },
        "country": { "type": "string" },
        "investmentPlan": { "type": "string", "enum": ["Gold", "Platinum"] },
        "investmentAmount": { "type": "number" },
        "currency": { "type": "string", "enum": ["NGN", "USD"] },
        "expectedDuration": { "type": "string" },
        "govIdType": { "type": "string" },
        "govIdUrl": { "type": "string" },
        "proofOfAddressUrl": { "type": "string" },
        "passportPhotoUrl": { "type": "string" },
        "referralCode": { "type": "string" },
        "notes": { "type": "string" },
        "adminNotes": { "type": "string", "description": "Internal notes from the admin regarding this application." },
        "status": { "type": "string", "enum": ["Processing", "Approved", "Rejected"], "default": "Processing"},
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" }
      },
      "required": [
        "userId",
        "fullName",
        "email",
        "phoneNumber",
        "country",
        "investmentPlan",
        "investmentAmount",
        "currency",
        "expectedDuration",
        "govIdType",
        "govIdUrl",
        "proofOfAddressUrl",
        "passportPhotoUrl",
        "createdAt",
        "status"
      ]
    },
    "Investment": {
      "title": "Investment",
      "description": "Represents an active investment for a user.",
      "type": "object",
      "properties": {
        "userId": { "type": "string" },
        "plan": { "type": "string", "enum": ["Gold", "Platinum"] },
        "amount": { "type": "number" },
        "startDate": { "type": "string", "format": "date-time" },
        "duration": { "type": "number", "description": "Duration in months" },
        "expectedReturn": { "type": "number" },
        "maturityDate": { "type": "string", "format": "date-time" },
        "status": { "type": "string", "enum": ["Active", "Matured", "Withdrawn"] },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" },
        "applicationId": { "type": "string", "description": "The ID of the original investment application."}
      },
      "required": ["userId", "plan", "amount", "startDate", "duration", "status", "createdAt", "applicationId"]
    }
  },
  "auth": {
    "providers": ["password", "google.com"]
  },
  "firestore": {
    "/loanApplications/{loanApplicationId}": {
      "schema": { "$ref": "#/entities/LoanApplication" },
      "description": "Stores all loan applications submitted through the public form."
    },
    "/investmentApplications/{investmentId}": {
        "schema": { "$ref": "#/entities/InvestmentApplication" },
        "description": "Stores all investment applications from users."
    },
    "/Customers/{customerId}": {
      "schema": { "$ref": "#/entities/Customer" },
      "description": "Stores all customer records."
    },
    "/Loans/{loanId}": {
      "schema": { "$ref": "#/entities/Loan" },
      "description": "Stores all loan records for customers."
    },
    "/Investments/{investmentId}": {
      "schema": { "$ref": "#/entities/Investment" },
      "description": "Stores all active investment records for users."
    },
    "/ExcelFiles/{fileId}": {
        "schema": {
            "type": "object",
            "properties": {
                "fileName": {"type": "string"},
                "fileUrl": {"type": "string", "format": "uri"},
                "uploadedAt": {"type": "string", "format": "date-time"},
                "processed": {"type": "boolean"},
                "status": {"type": "string", "enum": ["uploaded", "processed", "error"]},
                "error": {"type": "string"}
            }
        },
        "description": "Tracks uploaded Excel files for processing."
    }
  }
}
